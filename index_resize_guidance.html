<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
            <title>GeoDS - Interactive Redistricting Map</title>

        <!--put your external stylesheet links here-->
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/style copy.css">
        <link rel="stylesheet" href="lib/bootstrap-5.1.3-dist/css/bootstrap.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/introjs.min.css">
        <!--[if IE<9]>
            <link rel="stylesheet" href="css/style.ie.css">
        <![endif]-->
    </head>

    <body>
        <!-- <div id="loading">
            <div id="close"></div>
            <p style="padding-top:-5px;"></p>

            <div id="slideshow1" class="slideshow-container">

                <div class="mySlides fade" id="s1">
                    <h2>
                        <b> Gerrymandering</b>
                    </h2>
                    <p class='paragaphText' style='text-align: justify;'>
                        In the United States, political districts are redrawn every 10 years to reflect new
                        Census data. When redrawing electoral district boundaries, legislators may try to
                        create districts so as to create an advantage for their party: this is gerrymandering.
                        <br>
                        <p class = 'text-center' >
                            <img src="img/1280px-The_Gerry-Mander_Edit.png" width="280px" height="280px">
                            <figcaption class = 'text-center'>Drawing of the salamander-like district 
                                shape that inspired the term 'gerrrymander'.</figcaption>
                        </p>
                    </p>
                </div>

                <div class="mySlides fade" id="s2">
                    <h2>About this project</h2>
                    <p class='paragaphText' style='text-align: justify;'>
                        <b>Research questions</b>
                        <br>
                        Though political gerrymandering is legal and to some degree unavoidable, many scholars
                        agree that it is harmful for our democracy: if voters feel like their vote doesn't count, they
                        lose faith in our government.
                        <br>
                        <b>Data</b>
                        <br>
                        <p class = 'text-center' >
                            <img src="img/OD_flow.png" width="300" height="240"> 
                            <figcaption class = 'text-center'>Drawing of the salamander-like district 
                                shape that inspired the term 'gerrrymander'.</figcaption>
                        </p>

                    </p>
                </div>
                
                <a class="prev" id="prev1">&#10094;</a>
                <a class="next" id="next1">&#10095;</a>
                
                
                <div style="text-align:center">
                  <span class="dot" id="dot1"></span> 
                  <span class="dot" id="dot2"></span> 
                </div>
            </div>


        </div>     -->
                
            
        <div class="container-fluid h-100 min-width-70" id="container1">
            <div class="row d-flex align-items-start justify-content-center align-content-stretch flex-column h-100 w-100">

                <nav class="navbar navbar-light bg-light" id="header" style="height: 60px">
                    <a class="navbar-brand" id="brand" href="#">
                        <img src="img/geods_logo.png" class="d-inline-block align-top" alt="">
                        <h1>GeoDS Lab @ UW-Madison</h1>
    
                    </a>
                    <a class="nav-link" id="tutorial" href="#gerrymandering"><img src="img/questionmark.png" class="d-inline-block align-top" alt="">
                    </a>           
                </nav>

                <div class="row d-flex flex-column" style="height: 240px">
                    <div id="proposalPanel" class="col-lg-3 col-md-3 d-flex flex-column align-content-start flex-wrap flex-grow-1">
                        <div class="row" style="height: 40px">
                            <p id="mapCheck"> Choose two maps to be displayed.</p>
                        </div>
                        
                        <div id="checkboxGroup" class="flex-grow-1">
                            <!-- ["Enacted", "EfficiencyGap", "Compactness", "InteractionRatio", "PMC"] -->
                            <label class="checkLabel"><input type="checkbox" name="Enacted" class="check" checked/> 2020 Enacted Map</label><br>
                            <!-- <a class="link" id="tutorial" href="#gerrymandering"></a><img class="qMap" src="img/questionmark.png" class="d-inline-block align-top"><br> -->
                            <label class="checkLabel"><input type="checkbox" name="Interaction-Ratio" class="check"  checked/> Max Interaction Ratio Map</label>
                            <a class="d-inline-block align-center" id="metric" href="#Interaction-Ratio"><img class="qMap" src="img/questionmark.png"></a><br>
                            <label class="checkLabel"><input type="checkbox" name="Efficiency-Gap" class="check" /> Max Efficiency Gap Map</label>
                            <!-- <a class="link" id="metric" href="#Efficiency Gap"><img class="qMap" src="img/questionmark.png" class="d-inline-block align-top"></a><br> -->
                            <a class="d-inline-block align-center" id="metric" href="#Efficiency-Gap"><img class="qMap" src="img/questionmark.png"></a><br>
                            <label class="checkLabel"><input type="checkbox" name="Compactness" class="check" /> Max Compactness Map</label>
                            <a  class="d-inline-block align-center" id="metric" href="#Compactness"><img class="qMap" src="img/questionmark.png"></a><br>
                            <label class="checkLabel"><input type="checkbox" name="PMC" class="check" /> PMC Map</label><br>
                            <p id="mapUncheck">* To choose a new map, uncheck a currently selected map and recheck a new map.</p>
                        </div>

                    </div> 
                    
                    <div id="pcpPanel" class="col-lg-9 col-md-9 d-flex flex-column align-content-start flex-wrap flex-grow-1">
                        <div class="d-flex align-items-stretch flex-row" style="height:40px;">
                            <p id="attrSelection" class="col-lg-9 col-md-9 flex-grow-1">Choose one variable to symbolize the maps.
                                <a class="d-inline-block align-center" id="metric2" href="#Metadata">
                                    <img class="qMap2" src="img/questionmark.png" style></a><br>
                            </p>
                    
                        </a>
                            <!-- <a class="d-inline-block align-center" id="metric" href="#Metadata"><img class="qMap" src="img/questionmark.png"></a><br> -->
                            <div id="pcpLegend" class="col-lg-3 col-md-3 flex-grow-1"></div>
                        </div>

                        <div id="pcpPlot" class="flex-grow-1"></div>
                        
                    </div>
                </div>


                <div class="row flex-grow-1 d-flex align-items-stretch align-content-around flex-column" id="mapPanel" >
                    <div class="row" style="height: 40px; width: 100%">
                        <div id="mapLegend" class="col-lg-12 col-md-12"></div>
                    </div>
                    <div class="row flex-grow-1 d-flex align-items-stretch flex-row" style="width: 100%">
                        <div id="mapPanel1" class="col-lg-6 col-md-6 flex-grow-1">
                            <div id="map1" style="width: 98%; height: 96%; position: relative; top: 2%; left: 1%">
                                <div class="chart-container-map1" style="position:relative;;height: 100%; width: 100%; z-index: 10000; float: left"></div>
                            </div>
                        </div>
                        
                        <div id="mapPanel2" class="col-lg-6 col-md-6 flex-grow-1">
                            <div id="map2" style="width: 98%; height: 96%; position: relative; top: 2%; left: 1%">
                                <div class="chart-container-map2" style="position:relative; height: 100%; width: 100%; z-index: 10000; float:left"></div>
                                <div class="reexpress-control" style= "width: 30px; height: 96px; position:absolute; right: 12px; bottom: 100px; z-index:10000">
                                    <button class="reexpress" id="choropleth"><img src="img/choroButton.png"></button>
                                    <button class="reexpress" id="propSymbol"><img src="img/symbolButton.png"></button>
                                    <button class="reexpress" id="bar"><img src="img/barButton.png"></button>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
            </div>
        </div>
        <!-- 3D cube -->
         <div class="row">
            <div id="Metrics" class="col-lg">
                <h2>Interactive redistricting values cube</h2>
                <p class='paragaphText'>
                    Blah blah blah
                </p>
            </div>                    
        </div>

        <div class="container-fluid h-50">
            <div class="row h-100 w-100">
                <div class="row flex-grow-1 d-flex justify-content-center" id="container2">
                <!-- style="width: 100%; height: 100%; justify-content: center"> -->
                    <iframe src="figure_229.html" ></iframe>
                </div>                                
            </div>
        </div>

        <div class="container-fluid h-50">
            <!-- <div class="row h-100 w-100"> -->
                <div class="row flex-grow-1 d-flex justify-content-center" id="container2">
                <!-- style="width: 100%; height: 100%; justify-content: center"> -->
                    <iframe src="figure_229.html" ></iframe>
                <!-- </div>                                 -->
            </div>
        </div>
                    

        <!-- <a class="d-inline-block align-center" id="metric2" href="#Metadata">
            <img class="qMap2" src="img/questionmark.png" style></a><br>
    </p> -->

        <div class="container-fluid h-100 min-width-70" id="container2">
            <div class="row w-100" >
                <div id="gerrymandering" class="col-lg">
                    <h2>What is redistricting?</h2>
                    <p class='paragaphText' style='text-align: justify;'>
                        In the United States, political districts are redrawn every 10 years to reflect new
                        Census data. When redrawing electoral district boundaries, legislators may try to
                        create districts so as to create an advantage for their party: this is gerrymandering.
                        Political gerrymandering is legal as long as it is not excessive, though what
                        constitutes "excess" is difficult to define. While gerrymandering for the purpose of
                        gaining partisan advantage is legal to some extent, gerrymandering to disenfranchise
                        voters on a racial basis is illegal. In either case, gerrymandering seeks to give one party
                        more representatives for the same number of votes, thus diluting the voting power of other parties.                      
                        <br>
                        <br>
                        Though political gerrymandering is legal and to some degree unavoidable, many scholars
                        agree that it is harmful for our democracy: if voters feel like their vote doesn't count, they
                        lose faith in our government.
                        <br>
                        <br>
                        <p class = 'text-center' >
                            <img src="img/1280px-The_Gerry-Mander_Edit.png" width="400" height="400">
                            <figcaption class = 'text-center'>Drawing of the salamander-like district 
                                shape that inspired the term 'gerrrymander'.</figcaption>
                        </p>                         

                    </p>
                </div>

                <div class="row">
                    <div id="Metrics" class="col-lg">
                        <h2>How to evaluate redistricting maps?</h2>
                        <p class='paragaphText'>
                        While there is still debate about the goals of redistricting and the criteria that should be used for the evaluation of redistricting plans,
                        certain concepts show up repeatedly in plan requirements and in legal challenges. Two of the most common ways to evaluate redistricting plans 
                        are with geometric compactness and fairness measurements. Outside of these common requirements, researchers in different fields have proposed
                        novel metrics for evaluating redistricting plans, with the goal of improving upon existing criteria to produce better district maps. Below, we 
                        describe some of the common metrics used for district evaluation, as well as a new metric termed the interaction ratio.
                        </p>
                    </div>                    
                </div>

                <div class="row">
                    <div id="Interaction Ratio" class="col-lg">
                        <h4>Interaction Ratio:</h4>
                        <p class='paragaphText'> 
                        A communitiy is a group of people that have more in common with each other, on average, than they do with
                        people from another group. Redistricting groups people across geographic space, and therefore can either split
                        communities or keep them intact.
                    
                        Redistricting laws in many states have explicit preferences for redistricting plans that follow existing boundaries,
                        such as county lines, which implicitly encourages communities to be kept intact. Frequently, in legal challenges
                        to gerrymandered districts, split municipalities are shown as evidence that natural communities were split 
                        in order to gain partisan advantage.
                        <br><br>
                        Communities of interest and majority-minority districts are two explicit ways of keeping particular communities intact,
                        and both function by keeping groups of people with common policy concerns in a single district. For communities of interest,
                        people from such a group self identify and advocate for being kept in a single interest so that they can elect a representative
                        that will represent their particular interests. Majority-minority districts are similar, though they are required by the
                        Voting Rights Act so as to not "improperly dilute minorities voting power."
                        <br><br>
                        None of these community formations, however, attempt to maintain communities across <i>all</i> districts. 
                        Framed as an optimization problem, we might ask how we could make districts such that we maintain as many communities
                        as possible within each district, such that we minimize community splitting across all districts. While optimization
                        is redistricting is notoriously difficult, we attempt here to show at least what a range of possibilities might look like
                        if such a metric were incorporated into redistricting law.
                        <br><br>
                        For such an optimization, we need both a formula for defining community strength, and a measurement to use in that formula.
                        For the measurement, we employ human mobility flows from Safegraph. The mobility flows consist of anomymized cellphone counts 
                        that have moved from one census block group to another during a given time span. To quantify community strength, we use 
                        the interaction ratio, which is related to the frequently used modularity measurement in community detection research. We define the interaction ratio here as the sum of district intra flow
                        divided by the sum of district inter flows, where intra flows are mobility flows originating in one district and ending in that same
                        district, while inter flows are mobility flows originating in one district and ending in another. By summing across all districts
                        to calculate the interaction ratio, we can get a sense of how the districting plan, as a whole, keeps communties intact.
                        </p>
                        <p class = 'text-center' >
                            <img src="img/example_flows.png" width="500" height="500">
                            <figcaption class = 'text-center'>Example districts and flows.</figcaption>
                        </p>
                        <br>
                        <br>
                        <br>
                        <p class= 'text-center'>
                            <img src="img/flows_equation.png" style = "width: 900px;height: auto;">
                            <figcaption class = 'text-center'>Calculating the interaction ratio for the example districting plan.</figcaption>
                        </p>
                        <!-- <p class="text-center"> -->
                            
                        <!-- </p> -->
                    </div>
                </div>

                <div class="row">
                        <div id="Efficiency Gap" class="col-lg">
                            <h4>Efficiency Gap</h4>
                                <p class='paragaphText'>
                                "[The efficiency gap] represents the difference between the parties’ respective wasted votes in an 
                                election—where a vote is wasted if it is cast (1) for a losing cadidate, or 
                                (2) for a winning candidate but in excess of what she 
                                needed to prevail. Large numbers of votes commonly are cast for 
                                losing candidates as a result of the time-honored gerrymandering technique of “cracking.”
                                Likewise, excessive votes often are cast for winning candidates thanks to the equally 
                                age-old mechanism of “packing.” The efficiency gap essentially aggregates all of a district 
                                plan’s cracking and packing choices into a single, tidy number." 
                                <a href="https://uchicagolawjournalsmshaytiubv.devcloud.acquia-sites.com/sites/lawreview.uchicago.edu/files/04%20Stephanopoulos_McGhee_ART.pdf">
                                (Stephanopoulos, McGhee, 2015)</a>.
                                For more reading on the efficiency gap, you can visit 
                                <a href ="https://ballotpedia.org/Efficiency_gap">
                                ballotpedia</a>.     
                                <br><br>        
                                To demonstrate how gerrymandering uses both packing and cracking to
                                change election outcomes, we present the following example from
                                <a href ="https://www.washingtonpost.com/graphics/2017/politics/courts-law/gerrymander/">
                                the Washington Post</a>:
                                In this example, the Purple and Green parties are competing to win seats in 5 equal-population
                                districts, and votes for a given party a represented by icons of the same color. The Green party
                                receives 20/50 votes, yet is able to win 3/5 seats due to how the districts were arranged. 
                                <p class="text-center">
                                    <img src="img/gerrymandering-1-600.jpg" style = "width: 700px;height: auto;">
                                    <figcaption class = 'text-center'>An example state split into 5 districts, each with an equal population.</figcaption>
                                </p>
                                
                                <p class='paragaphText'>
                                To achieve
                                this outcome, Purple voters are "packed" into two districts such they was "waste" votes in those districts,
                                as they receive many more votes than simple majorrity required to win those two districts. Conversely, 
                                almost no Green votes are "wasted" on competing for those two districts - instead, the Green votes are
                                largely concentrated in the upper three districts. In those same districts, the Green party is able to
                                narrowly win all three elections, since the purple voters were "cracked" such they are a narrow minority in
                                the upper three districts.
                                </p>
                                <p class="text-center">
                                    <img src="img/cropped.png" style = "width: 700px;height: auto;">
                                    <figcaption class = 'text-center'>The districts are gerrymandered such that 
                                        as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                        of districts while winning a minority of the votes.</figcaption>
                                </p>
                                <!-- <p class="text-center">
                                    The districts are gerrymandered such that 
                                        as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                        of districts while winning a minority of the votes. -->
                                </p>
                                <p class="text-center">
                                    <img src="img/eff_gap_calc_18_cropped.png" style = "width: 550px;height: auto;">
                                    <figcaption class = 'text-center'>
                                        The districts are gerrymandered such that 
                                            as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                            of districts while winning a minority of the votes.</figcaption>
                                </p>
                                <!-- <p class="text-center">
                                    The districts are gerrymandered such that 
                                        as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                        of districts while winning a minority of the votes. -->
                                <!-- </p> -->
                            </div>
                </div>
                

                <div class="row">
                    <div id="Compactness" class="col-lg">
                        <h4>Compactness</h4>
                        <p class='paragaphText'>
                        Compactness is metric that is used in redistricting to help guard against gerrymandering. Compactness
                        can be defined geometrically in many ways, but the general idea in redistricting is to avoid long, odd shapes
                        that demonstrate intent to unnaturally split communities in such as way as to crack and pack districts. For
                        more specifics on compactness, you can refer to                   
                        <a href ="https://ballotpedia.org/Compactness">
                        ballotpedia</a>.
                        Here, we use the Polsby-Popper definition of compactness, which essentially compares
                        the area and perimeter of a district. The range of values of this metric is from 0 to 1, where 0 is 
                        the least compact and 1 is the most compact (the district is circular).
                        </p>
                        <p class = 'text-center' >
                            <img src="img/pp.png"style = "width: 500px;height: auto;">
                            <figcaption class = 'text-center'>Formula for Polsby-Popper compactness.</figcaption>
                        </p>
                    </div>
                    
                </div>

                <div class="row">
                    <div id="Metadata" class="col-lg">
                        <h4>Metadata</h4>
                        <p class='paragaphText'>
                        The following table describes the attributes used in the plots and interactive maps. Demographic and voting data was acquired from Maptitude.
                        </p>
                        <div class="row justify-content-center">
                            <div class="col-auto"> 
                            <style type="text/css">
                                .tg  {border-collapse:collapse;border-spacing:0;}
                                .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
                                  overflow:hidden;padding:10px 5px;word-break:normal;}
                                .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
                                  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
                                .tg .tg-fymr{border-color:inherit;font-weight:bold;text-align:left;vertical-align:top}
                                .tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
                                </style>
                                <table class="tg">
                                <thead>
                                  <tr>
                                    <th class="tg-fymr">Attribute</th>
                                    <th class="tg-fymr">Description</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td class="tg-0pky">population</td>
                                    <td class="tg-0pky">Total population count (all ages)</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">White</td>
                                    <td class="tg-0pky">White population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">Black</td>
                                    <td class="tg-0pky">Black population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">HISPANIC</td>
                                    <td class="tg-0pky">Hispanic population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">Asian</td>
                                    <td class="tg-0pky">Asian population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">AmIndian</td>
                                    <td class="tg-0pky">American Indian population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">PISLAND</td>
                                    <td class="tg-0pky">Pacific Islander population count</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">D_votes</td>
                                    <td class="tg-0pky">Vote count for democratic candidate in the 2018 US House election</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">R_votes</td>
                                    <td class="tg-0pky">Vote count for republican candidate in the 2018 US House election</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">D_percents</td>
                                    <td class="tg-0pky">Percent of total votes won by democrat candidate in the 2018 US House election</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">R_percents</td>
                                    <td class="tg-0pky">Percent of total votes won by republican candidate in the 2018 US House election</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">intra_flows</td>
                                    <td class="tg-0pky">Total count of population-level mobility flows originating and ending in the same district</td>
                                  </tr>
                                  <tr>
                                    <td class="tg-0pky">inter_flows</td>
                                    <td class="tg-0pky">Total count of population-level mobility flows originating in one district and ending in another</td>
                                  </tr>
                                </tbody>
                                </table>
                            </div>
                            </div>
                            <br>
                    </div>
                </div>
    
        </div>
        <div class="row">
            <div id="About" class="col-lg">
                <h4>About</h4>
                <p class='paragaphText'>
                    This webmap was produced by the <a href ="https://geography.wisc.edu/geods/">GeoDS Lab</a> at the 
                    University of Wisconsin, Madison.       
                             
                    <!-- Funding was provided by a University of Wisconsin 2020 WARF Discovery Initiative, as 
                    part of a project titled "Multidisciplinary Approach for Redistricting Knowledge". -->
                    
                    Please contact <a href = "mailto:song.gao@wisc.edu?subject = Feedback&body = Message">
                        Song Gao
                        </a> with any inquiries.
                </p>
                
            </div>
            
        </div>
        <div id="sttop"></div>

        <!-- <script type="text/javascript" src="js/main.js"></script> --> 
        <!-- <script src="jquery-3.6.0.min.js"></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

        <script type="text/javascript" src="lib/leaflet/leaflet.js"></script>
        <script type="text/javascript" src="lib/L.Map.Sync.js"></script>
        <script type="text/javascript" src="lib/scrolltop.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/intro.min.js"></script>
        <script type="text/javascript" src="lib/leaflet-choropleth-gh-pages/dist/choropleth.js"></script>
        <script type="text/javascript" src="lib/d3/dist/d3.js"></script>
        <script type="text/javascript" src="lib/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
        <script type="text/javascript" src="js/merge_yuhan.js"></script>
    </body>
</html>