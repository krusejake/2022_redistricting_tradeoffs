<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
            <title></title>

        <!--put your external stylesheet links here-->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="lib/bootstrap-5.1.3-dist/css/bootstrap.css">
        <!--[if IE<9]>
            <link rel="stylesheet" href="css/style.ie.css">
        <![endif]-->

         <!--you can also place internal styles here;
             place these within <style> tags-->
        
    </head>

    <body>
        <!-- <div id="proposalPanel" style="width: 300px; height: 250px; position: absolute; top: 10px; left: 10px;">
             -->
        <div class="container-fluid">
            <div class="row">
                <!-- <div id="space" class="col-lg-1"></div> -->
                <!-- <div id="leftMargin" class="col-lg-1"> -->
                <!-- </div> -->
                <div id="proposalPanel" class="col-lg-3 col-md-2">
                    <p>Choose two maps to be displayed.</p>
                    <p>To choose a new map, uncheck a currently selected map and recheck a new map.</p>
                    <label><input type="checkbox" name="current" class="check" checked/> 2020 Enacted Map</label><br>
                    <label><input type="checkbox" name="effGap" class="check" checked /> Max effGap Map</label><br>
                    <label><input type="checkbox" name="compactness" class="check" /> Max Compactness Map</label><br>
                    <label><input type="checkbox" name="modularity" class="check" /> Max Modularity Map</label><br>
                    <label><input type="checkbox" name="pmc" class="check" /> PMC Map</label><br>
                </div> 
                
                <div id="pcpPanel" class="col-lg-9 col-md-10">
                    <p>Choose one variable to symbolize the maps.</p>
                    <!-- <div id="pcpLegend" style="width:100%; height:100%"></div> -->
                    <!-- <div id="pcpLegend" style="width:30%; height:10%"></div> -->
                    <div id="pcpLegend"></div>
                    <div id="pcpPlot"></div>
                </div>
                <!-- <div id="space" class="col-lg-1 col-md-0"></div> -->
                <!-- <div id="rightMargin" class="col-lg-1"> -->
                <!-- </div> -->
            </div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="mapLegend" class="col-lg"></div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="map1" class="col-lg" style="height:500px">
                    <div class="chart-container-map1" style="position:relative;;height: 100%; width: 100%;  right: -30%; bottom: -50%;z-index: 10000"></div>

                </div>
                <div id="map2" class="col-lg" style="height:500px">
                    <div class="reexpress-control" style= "position:relative;  right: -80%; bottom: -80%; z-index:10000">
                        <button class="reexpress" id="choropleth"><img src="img/choroButton.png"></button>
                        <button class="reexpress" id="propSymbol"><img src="img/symbolButton.png"></button>
                        <button class="reexpress" id="bar"><img src="img/barButton.png"></button>
                    </div>
                    <div class="chart-container-map2" style="position:relative; height: 90%; width: 100%;  left: 5%; top: 5%;z-index: 10000"></div>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
        </div>
        <div class="container-fluid"></div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="overview" class="col-lg">
                    <h2>Overview</h2>
                    <p class='paragaphText'>This website is designed to help people understand how different goals of redistricting 
                        can be in tension with each other. Here, we focus on two common redistricting criteria, compactness
                        and efficiency gap, while introducing a third criteria based on community flows, which we call 
                        modularity. <br>

                        Below, we present a brief background on redistricting, and describe 
                        how each of the metrics seen in the map above are calculated.
                        
                    </p>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
            <div class="row">
            <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="gerrymandering" class="col-lg">
                    <h2>Gerrymandering</h2>
                    <p class='paragaphText' style='text-align: justify;'>
                        "In representative democracies, gerrymandering the political manipulation 
                        of electoral district boundaries with the intent of creating undue advantage 
                        for a party, group, or socio-economic class within the constituency. 
                        The manipulation may consist of "cracking" (diluting the voting power of the 
                        opposing party's supporters across many districts) or "packing" (concentrating 
                        the opposing party's voting power in one district to reduce their voting power 
                        in other districts)
                        <br>
                        <br>
                        The term gerrymandering is named after American politician Elbridge Gerry,
                        Vice President of the United States at the time of his death, who, as 
                        Governor of Massachusetts in 1812, signed a bill that created a partisan
                        district in the Boston area that was compared to the shape of a mythological 
                        salamander. The term has negative connotations and gerrymandering is almost 
                        always considered a corruption of the democratic process. The resulting 
                        district is known as a gerrymander. The word is also a verb for the process."
                        
                        <br>
                        (<a href="https://en.wikipedia.org/wiki/Gerrymandering">https://en.wikipedia.org/wiki/Gerrymandering</a>)
                        <div class="row"></div>
                        <br>
                        <p class = 'text-center' >
                            <img src="img/1280px-The_Gerry-Mander_Edit.png" width="400" height="400">
                            <figcaption class = 'text-center'>Drawing of the salamander-like district 
                                shape that inspired the term 'gerrrymander'.</figcaption>
                        </p>
                        <div class="row"></div>
                         

                    </p>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="Metrics" class="col-lg">
                        <h2>Metrics</h2>
                        <p class='paragaphText'>
                        The following sections describe each metric and how they are calculated.
                        </p>
                    </div>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="overview" class="col-lg">
                        <h4>Modularity:</h4>
                        <p class='paragaphText'> 
                        A communitiy is a group of people that have more in common with each other, on average, than they do with
                        people from another group. Redistricting groups people across geographic space, and therefore can either split
                        communities or keep them intact.
                 
                        Redistricting laws in many states have explicit preferences for redistricting plans that follow existing boundaries,
                        such as county lines, which implicitly encourages communities to be kept intact. Frequently, in legal challenges
                        to gerrymandered districts, split municipalities are shown as evidence that natural communities were split 
                        in order to gain partisan advantage.
                        <br><br>
                        Communities of interest and majority-minority districts are two explicit ways of keeping particular communities intact,
                        and both function by keeping groups of people with common policy concerns in a single district. For communities of interest,
                        people from such a group self identify and advocate for being kept in a single interest so that they can elect a representative
                        that will represent their particular interests. Majority-minority districts are similar, though they are required by the
                        Voting Rights Act so as to not "improperly dilute minorities voting power."
                        <br><br>
                        None of these community formations, however, attempt to maintain communities across <i>all</i> districts. 
                        Framed as an optimization problem, we might ask how we could make districts such that we maintain as many communities
                        as possible within each district, such that we minimize community splitting across all districts. While optimization
                        is redistricting is notoriously difficult, we attempt here to show at least what a range of possibilities might look like
                        if such a metric were incorporated into redistricting law.
                        <br><br>
                        For such an optimization, we need both a formula for defining community strength, and a measurement to use in that formula.
                        For the measurement, we employ human mobility flows from Safegraph. The mobility flows consist of anomymized cellphone counts 
                        that have moved from one census block group to another during a given time span. To quantify community strength, we use 
                        modularity, which is freqeuntly used in community detection research. Modularity here is defined as the sum of district intra flow
                        divided by the sum of district inter flows, where intra flows are mobility flows originating in one district and ending in that same
                        district, while inter flows are mobility flows originating in one district and ending in another. By summing across all districts
                        to calculate modularity, we can get a sense of how the districting plan, as a whole, keeps communties intact.

                        </p>


                        <p class="text-center">
                            <img src="img/cropped.png" style = "width: 700px;height: auto;">
                        </p>
                        <p class="text-center">
                            The districts are gerrymandered such that 
                                as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                of districts while winning a minority of the votes.
                        </p>





                        <p class = 'text-center' >
                            <img src="img/example_flows.png" width="500" height="500">
                            <figcaption class = 'text-center'>Example districts and flows..............................
                                ...........................................................................................
                                .....................................</figcaption>
                        </p>
                        <p class="text-center">
                            Example districts and flows.
                        </p>
                        <br>
                        <br>
                        <p class= 'text-center'>
                            <img src="img/flows_equation.png" style = "width: 900px;height: auto;">
                            <figcaption class = 'text-center'>Calculating modularity for an example districting plan.</figcaption>
                        </p>
                    </div>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="Efficiency Gap" class="col-lg">
                        <h4>Efficiency Gap</h4>
                        <p class='paragaphText'>
                        <!-- In a gerrymander, a particular voting bloc, e.g. a group with common interests, is both diluted and concentrated
                        across various districts so as to minimize their total representation across districts, allowing another voting
                        bloc to win more representative seats. Diluting votes is done via cracking, in which communities are divided amongst
                        districts in which they will be a minority. Concentrating votes is done via packing, in which similar communities
                        are grouped together such that they have a super-majority in one district, while allowing other districts
                        to be won by another party. The efficiency gap is a metric frequently used to quantify the net effect of such practices.
                        <br><br> -->
                        "[The efficiency gap] represents the difference between the parties’ respective wasted votes in an 
                        election—where a vote is wasted if it is cast (1) for a losing cadidate, or 
                        (2) for a winning candidate but in excess of what she 
                        needed to prevail. Large numbers of votes commonly are cast for 
                        losing candidates as a result of the time-honored gerrymandering technique of “cracking.”
                        Likewise, excessive votes often are cast for winning candidates thanks to the equally 
                        age-old mechanism of “packing.” The efficiency gap essentially aggregates all of a district 
                        plan’s cracking and packing choices into a single, tidy number." 
                        <a href="https://uchicagolawjournalsmshaytiubv.devcloud.acquia-sites.com/sites/lawreview.uchicago.edu/files/04%20Stephanopoulos_McGhee_ART.pdf">
                        (Stephanopoulos, McGhee, 2015)</a>.
                        For more reading on the efficiency gap, you can visit 
                        <a href ="https://ballotpedia.org/Efficiency_gap">
                        ballotpedia</a>.     
                        <br><br>        
                        To demonstrate how gerrymandering uses both packing and cracking to
                        change election outcomes, we present the following example from
                        <a href ="https://www.washingtonpost.com/graphics/2017/politics/courts-law/gerrymander/">
                        the Washington Post</a>:
                        In this example, the Purple and Green parties are competing to win seats in 5 equal-population
                        districts, and votes for a given party a represented by icons of the same color. The Green party
                        receives 20/50 votes, yet is able to win 3/5 seats due to how the districts were arranged. 
                        <p class="text-center">
                            <img src="img/gerrymandering-1-600.jpg" style = "width: 700px;height: auto;">
                        </p>
                        <p class="text-center" >
                        An example state split into 5 districts, each with an equal population.
                        <br>
                        Voters are shown as either voting for the Purple or the Green party.
                        </p>
                        <p class='paragaphText'></p>
                        To achieve
                        this outcome, Purple voters are "packed" into two districts such they was "waste" votes in those districts,
                        as they receive many more votes than simple majorrity required to win those two districts. Conversely, 
                        almost no Green votes are "wasted" on competing for those two districts - instead, the Green votes are
                        largely concentrated in the upper three districts. In those same districts, the Green party is able to
                        narrowly win all three elections, since the purple voters were "cracked" such they are a narrow minority in
                        the upper three districts.
                        </p>
                        <p class="text-center">
                            <img src="img/cropped.png" style = "width: 700px;height: auto;">
                        </p>
                        <p class="text-center">
                            The districts are gerrymandered such that 
                                as many Purple votes as possible are wasted,<br> allowing Green to win a majority
                                of districts while winning a minority of the votes.
                        </p>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>
                

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="compactness" class="col-lg">
                        <h4>Compactness</h4>
                        <p class='paragaphText'>
                        "Compactness refers to the principle that the constituents residing within an electoral 
                        district should live as near to one another as possible. Compactness can be measured as 
                        a ratio of the circumference of a district and its total area. Districts with higher 
                        ratios are said to be less compact. Compact districts tend to resemble geometric shapes, 
                        such as squares, with straight borders. Compactness can also refer to a shared culture 
                        among the residents of a district, with compact districts being those in which most 
                        residents share a common culture.
                        <br><br>
                        A total of 37 states require establish a compactness requirements for state legislative districts,
                        and 18 establish similar requirements for congressional districts. These states have different 
                        laws that regulate compactness. For example, Iowa requires that districts not be oddly shaped; 
                        California requires districts not to bypass nearby populated areas in favor of more distant populated areas."    
                        <a href ="https://ballotpedia.org/Compactness">
                        (https://ballotpedia.org/Compactness)
                        </a>
                        </p>
                    </div>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>

            </div>
        </div>
        <!--you can also use this space for internal scripts;
        place these within <script> tags-->

        <!--put your external script links here-->

        <!-- <script type="text/javascript" src="js/main.js"></script> --> -->
        <script type="text/javascript" src="lib/leaflet/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
        <script type="text/javascript" src="lib/leaflet-choropleth-gh-pages/dist/choropleth.js"></script>
        <script type="text/javascript" src="lib/d3/dist/d3.js"></script>
        <script type="text/javascript" src="lib/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
        <script type="text/javascript" src="js/merge.js"></script>
    </body>
</html>