<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
            <title></title>

        <!--put your external stylesheet links here-->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="lib/bootstrap-5.1.3-dist/css/bootstrap.css">
        <!--[if IE<9]>
            <link rel="stylesheet" href="css/style.ie.css">
        <![endif]-->

         <!--you can also place internal styles here;
             place these within <style> tags-->
        
    </head>

    <body>
        <!-- <div id="proposalPanel" style="width: 300px; height: 250px; position: absolute; top: 10px; left: 10px;">
             -->
        <div class="container-fluid">
            <div class="row">
                <!-- <div id="space" class="col-lg-1"></div> -->
                <!-- <div id="leftMargin" class="col-lg-1"> -->
                <!-- </div> -->
                <div id="proposalPanel" class="col-lg-3 col-md-2">
                    <p>Choose two maps to be displayed.</p>
                    <p>To choose a new map, uncheck a currently selected map and recheck a new map.</p>
                    <label><input type="checkbox" name="current" class="check" checked/> 2020 Enacted Map</label><br>
                    <label><input type="checkbox" name="effGap" class="check" checked /> Max effGap Map</label><br>
                    <label><input type="checkbox" name="compactness" class="check" /> Max Compactness Map</label><br>
                    <label><input type="checkbox" name="modularity" class="check" /> Max Modularity Map</label><br>
                    <label><input type="checkbox" name="pmc" class="check" /> PMC Map</label><br>
                </div> 
                
                <div id="pcpPanel" class="col-lg-9 col-md-10">
                    <p>Choose one variable to symbolize the maps.</p>
                    <!-- <div id="pcpLegend" style="width:100%; height:100%"></div> -->
                    <!-- <div id="pcpLegend" style="width:30%; height:10%"></div> -->
                    <div id="pcpLegend"></div>
                    <div id="pcpPlot"></div>
                </div>
                <!-- <div id="space" class="col-lg-1 col-md-0"></div> -->
                <!-- <div id="rightMargin" class="col-lg-1"> -->
                <!-- </div> -->
            </div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="mapLegend" class="col-lg"></div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="map1" class="col-lg" style="height:500px">
                    <div class="chart-container-map1" style="position:relative;;height: 100%; width: 100%;  right: -30%; bottom: -50%;z-index: 10000"></div>

                </div>
                <div id="map2" class="col-lg" style="height:500px">
                    <div class="reexpress-control" style= "position:relative;  right: -80%; bottom: -80%; z-index:10000">
                        <button class="reexpress" id="choropleth"><img src="img/choroButton.png"></button>
                        <button class="reexpress" id="propSymbol"><img src="img/symbolButton.png"></button>
                        <button class="reexpress" id="bar"><img src="img/barButton.png"></button>
                    </div>
                    <div class="chart-container-map2" style="position:relative; height: 90%; width: 100%;  left: 5%; top: 5%;z-index: 10000"></div>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
        </div>
        <div class="container-fluid"></div>
            <div class="row">
                <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="overview" class="col-lg">
                    <h2>Overview</h2>
                    <p class='paragaphText'>This website is designed to help people understand how different goals of redistricting 
                        can be in tension with each other. Here, we focus on two common redistricting criteria, compactness
                        and efficiency gap, while introducing a third criteria based on community flows, which we call 
                        modularity. <br>

                        Below, we present a brief background on redistricting, and describe 
                        how each of the metrics seen in the map above are calculated.
                        
                    </p>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>
            </div>
            <div class="row">
            <div id="space" class="col-lg-1 col-md-0"></div>
                <div id="gerrymandering" class="col-lg">
                    <h2>Gerrymandering</h2>
                    <p class='paragaphText' style='text-align: justify;'>In representative democracies, gerrymandering the political manipulation 
                        of electoral district boundaries with the intent of creating undue advantage 
                        for a party, group, or socio-economic class within the constituency. 
                        The manipulation may consist of "cracking" (diluting the voting power of the 
                        opposing party's supporters across many districts) or "packing" (concentrating 
                        the opposing party's voting power in one district to reduce their voting power 
                        in other districts)

                        The term gerrymandering is named after American politician Elbridge Gerry,
                        Vice President of the United States at the time of his death, who, as 
                        Governor of Massachusetts in 1812, signed a bill that created a partisan
                         district in the Boston area that was compared to the shape of a mythological 
                         salamander. The term has negative connotations and gerrymandering is almost 
                         always considered a corruption of the democratic process. The resulting 
                         district is known as a gerrymander The word is also a verb for the process.
                        
                         <br>
                         <p>Text and image are provided by Wikipedia:</p>
                         <a href="url">https://en.wikipedia.org/wiki/Gerrymandering</a>
                        <div class="row"></div>
                        <br>
                        <p class = 'text-center' >
                            <img src="img/1280px-The_Gerry-Mander_Edit.png" width="400" height="400">
                        </p>
                        <div class="row"></div>
                         

                    </p>
                </div>
                <div id="space" class="col-lg-1 col-md-0"></div>

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="Metrics" class="col-lg">
                        <h2>Metrics</h2>
                        <p class='paragaphText'>
                        The following sections describe each metric and how they are calculated.
                        </p>
                    </div>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>

                <div class="row">
                    <div id="space" class="col-lg-1 col-md-0"></div>
                    <div id="overview" class="col-lg">
                        <h4>Modularity:</h4>
                        <p class='paragaphText'> 
                        A communitiy is a group of people that have more in common with each other, on average, than they do with
                        people from another group. Redistricting groups people across geographic space, and therefore can either split
                        communities or keep them intact.
                        <br>
                        Redistricting laws in many states have explicit preferences for redistricting plans that follow existing boundaries,
                        such as county lines, which implicitly encourages communities to be kept intact. Frequently, in legal challenges
                        to gerrymandered districts, split municipalities are shown as evidence that natural communities were split 
                        in order to gain partisan advantage.
                        <br>
                        Communities of interest and majority-minority districts are two explicit ways of keeping particular communities intact,
                        and both function by keeping groups of people with common policy concerns in a single district. For communities of interest,
                        people from such a group self identify and advocate for being kept in a single interest so that they can elect a representative
                        that will represent their particular interests. Majority-minority districts are similar, though they are required by the
                        Voting Rights Act so as to not "improperly dilute minorities voting power."
                        <br>
                        None of these community formations, however, attempt to maintain communities across <i>all</i> districts. 
                        Framed as an optimization problem, we might ask how we could make districts such that we maintain as many communities
                        as possible within each district, such that we minimize community splitting across all districts. While optimization
                        is redistricting is notoriously difficult, we attempt here to show at least what a range of possibilities might look like
                        if such a metric were incorporated into redistricting law.
                        <br>
                        For such an optimization, we need both a formula for defining community strength, and a measurement to use in that formula.
                        For the measurement, we employ human mobility flows from Safegraph. The mobility flows consist of anomymized cellphone counts 
                        that have moved from one census block group to another during a given time span. To quantify community strength, we use 
                        modularity, which is freqeuntly used in community detection research. Modularity here is defined as the sum of district intra flow
                        divided by the sum of district inter flows, where intra flows are mobility flows originating in one district and ending in that same
                        district, while inter flows are mobility flows originating in one district and ending in another. By summing across all districts
                        to calculate modularity, we can get a sense of how the districting plan, as a whole, keeps communties intact.

                        </p>
                    </div>
                    <div id="space" class="col-lg-1 col-md-0"></div>
                </div>

            </div>
        </div>
        <!--you can also use this space for internal scripts;
        place these within <script> tags-->

        <!--put your external script links here-->

        <!-- <script type="text/javascript" src="js/main.js"></script> --> -->
        <script type="text/javascript" src="lib/leaflet/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
        <script type="text/javascript" src="lib/leaflet-choropleth-gh-pages/dist/choropleth.js"></script>
        <script type="text/javascript" src="lib/d3/dist/d3.js"></script>
        <script type="text/javascript" src="lib/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
        <script type="text/javascript" src="js/merge.js"></script>
    </body>
</html>