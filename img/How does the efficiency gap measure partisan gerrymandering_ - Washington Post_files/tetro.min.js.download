!function(){"use strict";function e(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)),a}function h(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=a,n=o[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(o,t))})}return a}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,a=arguments[e];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,i=[],s=!0,r=!1;try{for(n=n.call(t);!(s=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){r=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(r)throw o}}return i}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var i,L=[],r=["www.washingtonpost.com","pb-impact.washingtonpost.com",".*-sandbox.washingtonpost.com","pb-dev.digitalink.com","pb-staging.digitalink.com","subs-stage.washingtonpost.com","localhost.digitalink.com","localhost.washingtonpost.com","subscribe.digitalink.com",".*.preview.now.washingtonpost.com",".*carta.digitalink.com"],M={prod:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},fStage:{anon:{default:3e5,optedOut:63072e6},signed:{default:3e5,optedOut:3e5}},fqa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}},stage:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},qa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}}};function c(t){for(var e=!1,n=0;n<r.length;n+=1){var a=new RegExp(r[n]);if(t.match(a)){e=!0;break}}return e}function S(){if(void 0!==i)return i;try{var t=(new Date).toString(),e=(window.localStorage.setItem(t,t),window.localStorage.getItem(t)===t);return window.localStorage.removeItem(t),i=e}catch(t){return void(i=!1)}}function b(t){if(!t)return null;if(!document.cookie)return null;for(var e,n,a={},o=null,i=document.cookie.split(";"),s=0;s<i.length;s++)0<i[s].indexOf("=")&&(n=(e=i[s].split("="))[0],e=e[1],(n=n&&n.trim())===t&&(o=(e=e||"").trim()),a[n]=e.trim());return o}function v(t,e,n,a,o,i){var s="",r="",c=".washingtonpost.com",o=!1===o?"":";secure",i=(n<0?s=";expires=".concat(new Date(1e3).toUTCString):0<n&&(s=";expires=".concat(new Date(n).toUTCString())),null!=(c="qa"===i?".digitalink.com":c)&&(r=";domain=".concat(c)),e=e||"",n=a?e:encodeURIComponent(e),"".concat(t,"=").concat(n,";path=/").concat(s).concat(r).concat(o));document.cookie=i}function l(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return;return 1}function _(t,e,n){S()&&!l(e)&&c(window.location.hostname)&&(e.e=Date.now()+(n||0),localStorage.setItem(t,JSON.stringify(e)))}function u(e,o,i,s){return o=o||"GET",i=i&&JSON.stringify(i)||null,new Promise(function(n,a){var t=new XMLHttpRequest;t.open(o,e,!0),t.timeout=3e3,t.withCredentials=!0,s&&s.contentType&&t.setRequestHeader("Content-Type",s.contentType),t.onload=function(t){if(4===(t=t.target||{}).readyState&&200===t.status){var e={};try{(e=JSON.parse(t.response)).statusCode=200,n(e)}catch(t){a("")}}else 400<=t.status&&a({message:t.status})},t.onerror=function(t){a("")},t.ontimeout=function(){a("")},t.send(i)})}function p(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}var d="wapo_identity",w="wapo_secure_login_id",R="wp_usp",J="privacySetting",G={iabSpec:1,explicitNotice:"Y",optOut:"N",lspa:"Y"},g={prod:{env:"prod",feLoggingApi:"https://www.washingtonpost.com/subscribe/logging/",tetroApi:"https://www.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://www.washingtonpost.com/subscribe/user/auth-status",sipUrl:"https://www.washingtonpost.com/subscribe/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.washingtonpost.com/swg/check-entitlement"},fStage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",tetroApi:"https://subs-stage.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.wapostage.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},stage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",tetroApi:"https://subs-stage.washingtonpost.com/tetro/evaluate",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},fQa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",tetroApi:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"www.wapodev.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"},qa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",tetroApi:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"pb-dev.digitalink.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"}};function O(){var t="prod";return-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pb/")||-1!==window.location.hostname.indexOf("pb-impact")||-1!==window.location.hostname.indexOf("impact.wash")||-1!==window.location.hostname.indexOf("subs-stage")||-1!==window.location.hostname.indexOf("vforum-stage.")?t="stage":-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("sandbox.wash")||-1!==window.location.hostname.indexOf("subs-stage")||-1!==window.location.hostname.indexOf("preview.now.washingtonpost.com")?t="fStage":-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("www.digitalink.com")||-1!==window.location.hostname.indexOf("dev.wash")&&-1!==window.location.href.indexOf("/pf/")?t="fQa":-1===window.location.hostname.indexOf("digitalink.com")&&-1===window.location.hostname.indexOf("dev.wash")||(t="qa"),t}function m(){return g[O()]}var q={},k=window.performance&&window.performance.timing||{},x=(new Date).getTime(),f={};function C(t){y(f,t),window.pwapiPaywallResponse=f;for(var e=0;e<window.extConsumers.length;e++)window.extConsumers[e](f);for(var n=0;n<window.consumers.length;n++)window.consumers[n](f)}function t(t,e){for(var n=e.split("."),a=0,o=n.length;null!=t&&a<o;)t=t[n[a++]];return a&&a===o?t:void 0}var H=(new Date).getTime();function T(t,e,n){var a,o=m();switch(n=n||{},e=e||"",t){case"info":a="logInfo";break;case"success":a="logSuccess";break;case"error":a="logHandledError";break;case"expectedError":a="logExpectedError";break;default:a="logInfo"}t=o.feLoggingApi;try{var i=new XMLHttpRequest,s=(i.open("POST",t+a,!0),i.setRequestHeader("Content-Type","application/json"),n.processId=H,n.path=window.location.pathname,{appName:"site-paywall",locationId:"pwapi-proxy",message:e,state:n});i.withCredentials=!0,i.send(JSON.stringify(s)),i.onload=function(){},i.onerror=function(){}}catch(t){console.error("LOGGING ERROR")}}function Y(t){(t=t||{}).referrer=document.referrer,y(t,(a={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,n){0<=L.indexOf(e)&&(a[e]=n)}),a));var a,e,n,o="";for(e in t)t.hasOwnProperty(e)&&("string"==typeof(n=t[e])&&""!==n&&(o+="".concat(e,"=").concat(encodeURIComponent(n.trim()),"&")));return o}function V(i){var s=m()||{};return new Promise(function(e,t){var n,a,o={entitlements:i};if(n=document.cookie.match(/wapo_login_id=([^\;]*)/),a=document.cookie.match(/wapo_secure_login_id=([^\;]*)/),null!=n&&null!=n[1]&&null!=a&&null!=a[1])return e({status:"NOT_CHECKED",systemMessages:"User logged in"});u(s.checkEntitlementUrl,"POST",o,{contentType:"application/json"}).then(function(t){e(t)}).catch(function(t){t={status:"ERROR",systemMessages:"Check Entitlement failed with ".concat(t.message)};e(t)})})}function W(t){return t&&t.isSignedIn||!1}function D(t,e){var n,a,o,i;e&&""!==e&&(e=e.split(","),i=[],o=[],n={fusion:{metadata:"wpMetaData",content_type:"content_type",ct_tags:"ct_tags",sct_tags:"sct_tags"},classic:{metadata:"wp_meta_data",content_type:"contentType",ct_tags:"tags_for_paywall",sct_tags:"tags_for_paywall_subs"}}[q.name],o=(a=window[n.metadata]||{})[t=n[t]]&&a[t].split(",")||[],i=[].concat(s(o),s(e)),a[t]=i.join(","),window[n.metadata]=a)}function X(t){var n,e,a,o,i=t.actionCodes;o=i,e=!1,a=b("wp_dbg_ent"),(e=0<=o.toString().indexOf("23")||null!=a||e)&&D("sct_tags","subs_enterprise"),0<t.action&&(n=[],D("sct_tags",0===(o=t).userAttributes.length?"":(Object.entries(o.userAttributes).forEach(function(t){var t=j(t,2),e=t[0],t=t[1];"boolean"==typeof t?!0===t&&n.push("subs_".concat(e).toLowerCase()):""!==t&&null!==t&&n.push("subs_".concat(e,"_").concat(t).toLowerCase())}),n.join(","))),a=p("utm_medium"),(e=p("utm_campaign"))&&0<=["anyword"].indexOf(e)&&D("ct_tags","utm_c_".concat(e)),a&&0<=["social","email","news_tab","newsletter","referral","google","con-nat"].indexOf(a)&&D("ct_tags","utm_m_".concat(a))),0<t.action&&((o=t)&&o.userAttributes&&o.userAttributes.isTerminated||!1)&&D("ct_tags","subs_terminated"),0<t.action&&W(t)&&D("sct_tags","subs_signedin"),0<t.action&&W(t)&&D("ct_tags","subs_signedin"),0<t.action&&((e=t)&&e.isSubscriber||!1)&&D("sct_tags","subs_subscriber"),0<t.action&&D("ct_tags",i.filter(function(t){return-1<t.indexOf("w_")}).join(",")),a=!1,o=b("scroll0"),(a=null!=o&&0<o.length||a)&&D("sct_tags","scroll0")}function $(t){var e,n;e=t,(n=p("utm_medium"))&&(e.tetro_utm=n),e=t,S()&&void 0!==(null==(n=JSON.parse(localStorage.getItem("wapo_identity")))?void 0:n.dob_source)&&(e.tetro_dob_source=n.dob_source)}var B=[{name:"wapo_login_id",expireOffsetMillis:36e5,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wapo_secure_login_id",expireOffsetMillis:36e5,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wp_ak_v_m",expireOffsetMillis:5184e6,cookiesToLocalStorage:!0,localStorageToCookies:!0,useDelimiter:!0,delimiterValue:"|",notEncoded:!0}];function F(t,e){var n,a,o;(n=document.createElement("script")).type="text/javascript",n.setAttribute("subscriptions-control","manual"),n.src="https://news.google.com/swg/js/v1/swg.js",n.onerror=function(){},document.head.appendChild(n),a=t,o=e,(window.SUBSCRIPTIONS=window.SUBSCRIPTIONS||[]).push(function(t){var e=!1,n={process:"swg-entitlement"};if(-1===window.location.href.indexOf("localhost.")&&-1===window.location.href.indexOf("local."))try{t.init("washingtonpost.com:basic"),t.getEntitlements().then(function(t){return t&&t.entitlements&&0<t.entitlements.length?(C({action:0,data:{action:0},status:"final"}),e=!0,n.numEntitlements=t.entitlements.length,n.pwresp_action=a,n.pwresp_action_final=0,n.pwresp_mtrct=o,n.raw_entitlements=JSON.stringify(t.entitlements),t.entitlements.forEach(function(t,e){0<=t.source.indexOf("washingtonpost.com")?(n.postSWGPurchase=!0,t.subscriptionToken?n["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.subscriptionToken):n["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.signedEntitlements)):t.subscriptionToken&&(n.gglSWGPurchase=!0,t=JSON.parse(t.subscriptionToken),n["entitlement_".concat(e)]="entitlementType=google|orderId=".concat(t.orderId,"|packageName=").concat(t.packageName,"|productId=").concat(t.productId,"|purchaseTime").concat(t.purchaseTime))})):C({status:"final"}),t}).then(function(t){e&&V(t.entitlements).then(function(t){var e=[];e.push("isEntitled=".concat(t.status)),t.createAccount&&e.push("isLinked=".concat(!t.createAccount)),t.systemMessages&&e.push("messages=".concat(t.systemMessages)),n.entitlement_status=e.join("|"),T("info","swg entitlements",n)})}).catch(function(){C({status:"final"})})}catch(t){C({status:"final"})}else C({status:"final"})}),setTimeout(function(){"final"!==f.status&&C({status:"final"})},5e3)}function K(t){var e=t,t=(e.data.action,e.data.actionCodes.join(","),e.data.meterCount,e.status="processing",window.pwapiPaywallStatus=200,e.data.meterCount),n={3:"paywall",6:"softwall",9:"regwall"}[e.data.action],a=e.data.wallMeterType,o="";switch(n){case"paywall":o="".concat(a||"meter","_").concat(n),2===e.data.articleWeight&&(o="double_meter_".concat(n)),e.data.meterCount=o;break;case"softwall":case"regwall":a&&(e.data.meterCount="".concat(a,"_").concat(n))}X(e.data),!function(){var t,e;if(S())return t=localStorage.getItem("wp_sponsored"),-1<window.location.search.indexOf("das=pw_spsrd_hit")||-1<window.location.search.indexOf("pw_unlock_mgclink")?(localStorage.setItem("wp_sponsored",window.location.pathname),"function"==typeof window.history.replaceState&&(e=(e=window.location.href).replace(/das=[^\&]*/,""),window.history.replaceState({},null,e)),1):!(!t||window.location.pathname!==t)}()?3===e.data.action||8===e.data.action||9===e.data.action?F(e.data.action,t):e.status="final":(e.status="final",e.action=0,e.data.action=0),C(e)}function I(t,e){t=t||{},e=e||"info",C({status:"error"});var n={process:"pwapiproxy-response",xhrstatus:t.statusCode};t.timeout&&(n.timeout=t.timeout),T(e,t.msg,n)}function z(t){e=(document.cookie.match(/wp_pwapi=([^\;]*);/)||{})[1]||O(),e=g[e].tetroApi||g.prod.tetroApi;var e,o,i,s,r,c,l,u,n=[/^www-washingtonpost-com/].some(function(t){return t.test(window.location.hostname)})?((n=document.createElement("a")).href=e,n.pathname):e;Promise.all([(o=n,i=t,s="v2",r="POST",c=!0,l=5e3,u=[202,469,499],new Promise(function(n){var t,e=Y(i),a=window.location.href&&window.location.href.split("?")[0]||"",a=JSON.stringify({articles:[{article:"".concat(a,"?").concat(e)}]});try{o&&((t=new XMLHttpRequest).open(r,o),t.timeout=l,t.withCredentials=c,t.onload=function(){if(window["pwapi".concat(s,"Response")]=(new Date).getTime()-x,window["pwapiAPI".concat(s,"End")]=(new Date).getTime()-(k.navigationStart||0),t.readyState===XMLHttpRequest.DONE&&200===t.status){window["pwapiAPI".concat(s,"Ready")]=(new Date).getTime()-(k.navigationStart||0);var e={};try{(e=JSON.parse(t.response)).statusCode=t.status,K(e),n(e)}catch(t){e={status:"error",statusCode:t.statusCode=-1,msg:"pwapiproxy response invalid".concat(t.statusText?" - ".concat(t.statusText):"")};I(e,"error"),n(e)}}else t.readyState===XMLHttpRequest.DONE&&-1<u.indexOf(t.status)?n({status:"error",msg:"ignored status code"}):(I(e={status:"error",statusCode:t.status,msg:"pwapiproxy invalid status code"},"error"),n(e))},t.onerror=function(t){window["pwapiAPI".concat(s,"End")]=(new Date).getTime()-(k.navigationStart||0);t={status:"error",statusCode:t&&t.statusCode?t.statusCode:500,msg:"pwapiproxy error"};I(t,"error"),n(t)},t.ontimeout=function(){var t={status:"error",statusCode:504,timeout:((new Date).getTime()-x)/1e3,msg:"PWAPIPROXY TIMEOUT"};I(t,"expectedError"),n(t)},t.setRequestHeader("Content-Type","application/json"),window["pwapiAPI".concat(s,"Start")]=(new Date).getTime()-(k.navigationStart||0),t.send(a))}catch(t){e={status:"error",statusCode:500};e.msg="pwapiproxy error".concat(t.message?" - ".concat(t.message):""),I(e,"error"),n(e)}}))]).catch(function(){})}window.consumers=window.consumers||[],window.extConsumers=window.extConsumers||[],f.status="init",window.registerPwapiConsumer=function(t){window.consumers.push(t),t(f)},window.registerExtUpdates=function(t){window.extConsumers.push(t),t(f)},window.extListener=function(t){C(t)};var P={},Z=(P.pwapi_contentsection=window.wp_section||t(window.TWP,"Data.Tracking.props.section"),P.pwapi_ct_tags=t(window.wp_meta_data,"tags_for_paywall"),P.pwapi_sct_tags=t(window.wp_meta_data,"tags_for_paywall_subs"),P.commercial_node=t(window.TWP,"Data.Tracking.props.commercial_node"),P.content_type=t(window.TWP,"Data.Tracking.props.content_type"),P.is_amp="0",P.env=window.renderingEnv||"",P),E=m()||{},tt=(P=E.env,M[P]);function et(o){return new Promise(function(e,n){var t,a;"auth-status"===o?u("".concat(E.authStatusUrl,"?_v=").concat((new Date).getTime())).then(function(t){e(t)}).catch(function(t){n({status:"FAIL",errorState:"Auth Status failed"})}):"sip"===o?(t=A(),a=y(a={caller:"SubsStorageManager",requestId:function(){if(void 0===window.crypto)return null;var e=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}(),authStatus:!0},t),u(E.sipUrl,"POST",a,{contentType:"application/json"}).then(function(t){e(t)}).catch(function(){n("Auth Status failed")})):n("Invalid action: ".concat(o))})}function nt(t){for(var e=0;e<window.authConsumers.length;e++)window.authConsumers[e](t)}function at(t){var e=b(w),t=!(!t||!t.ccpa||"Y"!==t.ccpa.optOut),e=tt&&tt[!!e?"signed":"anon"][t?"optedOut":"default"]||0;return Date.now()+e}function A(){var t,e,n=null;return S()&&localStorage.getItem(d)&&(e=!1,S()&&localStorage.getItem(d)&&((t=JSON.parse(localStorage.getItem(d))).e&&Date.now()>t.e&&(e=!0)),e?S()&&localStorage.removeItem(d):n=JSON.parse(localStorage.getItem(d))),n}function ot(t){var e;S()&&c(window.location.hostname)&&(t=at((e=y(e=(e=localStorage.getItem(d))&&JSON.parse(e)||{},t)).privacySetting||{}),e.e=t,localStorage.setItem(d,JSON.stringify(e)))}function Q(t){if(S()&&localStorage.getItem(d))return JSON.parse(localStorage.getItem(d))[t]}function it(n){var t,e,a;n=n||(t=b(w),e=b(R),!1===Q("signedIn")&&t?"sip":(window.wp_meta_data&&window.wp_meta_data.tags_for_paywall&&-1!==window.wp_meta_data.tags_for_paywall.indexOf("ccpa")||window.wpMetaData&&window.wpMetaData.ct_tags&&-1!==window.wpMetaData.ct_tags.indexOf("ccpa")||!!(l(A())||t&&!e))&&"auth-status"),new Promise(function(t,e){!1!==n?et(n).then(function(t){t&&"SUCCESS"===t.status&&ot(a=t.userState)}).finally(function(){nt(a=A()),t(a)}):(nt(a=A()),t(a))})}function st(){it()}window.authConsumers=window.authConsumers||[],window.registerAuthConsumer=function(t){window.authConsumers.push(t),t(A())},window.updateIdentity=function(t){if(S()){var e=c(window.location.hostname),n=localStorage.getItem(d);if(e&&null!=n)try{var a=y(n=n&&JSON.parse(n)||{},t);localStorage.setItem(d,JSON.stringify(a))}catch(t){}}},window.storePrivacySetting=function(t){t="object"===a(t)?t:{};var e,n=Q(J)||{};n.ccpa=h(h(h({},G),n.ccpa),t.ccpa),l(n)||(t=b(w),e="".concat(n.ccpa.iabSpec,n.ccpa.explicitNotice,n.ccpa.optOut,n.ccpa.lspa),ot({privacySetting:n}),t?it("sip"):(t=O(),n=at(n),v(R,e,n,!0,!0,t)))};var U={getUspString:function(t){return"".concat((t=t||{}).iabSpec,t.explicitNotice,t.optOut,t.lspa)},getUSPData:function(t,e){var n,a="".concat(t,"---");S()&&localStorage.getItem(d)&&(n=Q("geoState"),navigator.globalPrivacyControl&&"CA"===n?a="1YYY":(n=Q(J))&&n.ccpa&&(a=U.getUspString(n.ccpa))),a&&((n={}).version=t,n.uspString=a,e(n,!0))},v1:{getUSPData:function(t){U.getUSPData(1,t)}}},N=(window.addEventListener("message",function(n){var t,e;return n.data.hasOwnProperty("__uspapiCall")&&(n.stopImmediatePropagation&&n.stopImmediatePropagation(),t=n.data.__uspapiCall.command,e=n.data.__uspapiCall.version,t&&e&&window.__uspapi(t,e,function(t,e){e?n.source.postMessage({__uspapiReturn:{returnValue:t,success:e,callId:n.data.__uspapiCall.callId}},n.origin):n.source.postMessage({__uspapiReturn:{returnValue:{version:1,uspString:"1NYY"},success:!1,callId:n.data.__uspapiCall.callId}},n.origin)})),null},!1),window&&window.location&&-1<window.location.search.indexOf("debug=true")||!1),rt=function(t,e){if(null!==(e=e.toLowerCase()).toLowerCase().match(/(ready|final|error)/)&&(!window.dQ.participantStatus[t]||"error"!==window.dQ.participantStatus[t].status)){"final"!==(window.dQ.participantStatus[t].status=e)&&"error"!==e||(window.dQ.participantStatus[t].readyDisplay=!1);var e=window.dQ.participants.filter(function(t){return window.dQ.participantStatus[t]&&""===window.dQ.participantStatus[t].status}),n=(N&&console.log("still waiting on response from: ".concat(JSON.stringify(e))),!0),a=window.dQ.participants.filter(function(t){t=window.dQ.participantStatus[t];return!!t&&("ready"!==t.status&&"final"!==t.status&&(n=!1),"ready"===t.status&&!1===t.readyDisplay&&!0===n)});if(N&&console.log("displayable queue: ".concat(JSON.stringify(a))),0<a.length){window.dQ.displayableGroup=window.dQ.participantStatus[a[0]]&&window.dQ.participantStatus[a[0]].displayGroup;for(var o=window.dQ.displayable[window.dQ.displayableGroup],i=window.dQ.participants.filter(function(t){t=window.dQ.participantStatus[t];return!!t&&("ready"===t.status&&t.displayGroup===window.dQ.displayableGroup)}),s=0;s<a.length;s+=1){var r=window.dQ.participantStatus[a[s]];r&&r.displayGroup===window.dQ.displayableGroup&&o.concurrent_displayable>=i.length&&window.dQ.displayable.total<=window.dQ.displayable.max&&(r.readyDisplay=!0,window.dQ.displayable.total+=1)}for(var c=0;c<window.dConsumers.length;c+=1){var l=window.dConsumers[c],u=l.participant,l=l.callback;0<=a.indexOf(u)&&l(window.dQ.participantStatus[u])}}N&&console.log(" Display Group: ".concat(window.dQ.displayableGroup,"\n\n        Total Displayed: ").concat(window.dQ.displayable.total,"\n\n        Max Displayable: ").concat(window.dQ.displayable.max,"\n\n        Current participantStatus queue: ").concat(JSON.stringify(window.dQ.participantStatus).replaceAll("},","},\n")))}},ct=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.participant,n=t.callback;window.dConsumers.push(t),n(window.dQ.participantStatus[e])};function lt(){window.pwapiVersion="Version 1.16.3 on Thu, 05 May 2022 18:56:54 GMT",window.pwapiStart=x-(k.navigationStart||0);var i={status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"2"},s=((s=window.dQ||{}).hold=s.hold||[],window.dConsumers=window.dConsumers||[],y(s,{displayable:{max:2,total:0,1:{concurrent_displayable:1},2:{concurrent_displayable:2}},status:"init",participantStatus:{iab_banner:{name:"iab_banner",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1",timeout:3e4},paywall:{name:"paywall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1"},regwall:{name:"regwall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"1"},softwall:{name:"softwall",status:"",readyDisplay:!1,hasProcessed:!1,displayGroup:"2"}}})),t=["paywall","regwall","iab_banner","softwall"];for("1"!==(document.cookie.match("wp_ak_ot=(1)[^;]*(;|$)")?RegExp.$1:"")&&t.splice(2,1),s.participants=s.participants||t,window.dQ=s,window.registerDisplay=function(){var t=arguments.length<=0?void 0:arguments[0],e=t.participant,n=t.status,a=t.callback,o=t.info;(Array.isArray(e)?e:e.split()).forEach(function(t){var e=t;e&&!s.participantStatus[e]&&(s.participantStatus[e]=h(h({name:e},i),{info:o}),s.participants.push(e)),e&&a?ct({participant:e,callback:a}):e&&n?(y(s.participantStatus[e],{info:o}),rt(e,n)):e&&o?(y(s.participantStatus[e],{info:o}),window.dConsumers.filter(function(t){return t.participant===e}).forEach(function(t){t.callback(s.participantStatus[t.participant])})):a||n||o||!e||(s.participantStatus[e]=h({name:e},i),s.participants.push(e))})};0<s.hold.length;){var e=s.hold.splice(0,1);window.registerDisplay(e[0])}window.registerPwapiConsumer(function(t){"error"!==t.status&&0!==t.action||(window.registerDisplay({participant:"paywall",status:"final"}),window.registerDisplay({participant:"softwall",status:"final"}),window.registerDisplay({participant:"regwall",status:"final"}))}),$(Z),z(Z),window.dQ.participants.filter(function(t){return window.dQ.participantStatus[t]&&null!=window.dQ.participantStatus[t].timeout&&"ready"!==window.dQ.participantStatus[t].status}).forEach(function(t){t=window.dQ.participantStatus[t];setTimeout(function(t){"ready"!==window.dQ.participantStatus[t].status&&window.registerDisplay({participant:t,status:"final",info:{statusMsg:"timeout"}})},t.timeout,t.name)});var n=O(),t={},a={};if(S()){for(var o=0;o<B.length;o++){var r=B[o];try{var c=r.name,l=b(c),u=localStorage.getItem(c),p={};if(u)try{(p=JSON.parse(u)).e<(new Date).getTime()&&(p={},localStorage.removeItem(c))}catch(t){p={},localStorage.removeItem(c)}var d,w,g,m=null!=l,f=null!=p.v;f&&!m&&r.localStorageToCookies&&(v(c,p.v,p.e,r.notEncoded,!0,n),a[c]=p.v),!f&&m&&r.cookiesToLocalStorage&&_(c,{v:l},r.expireOffsetMillis),m&&f&&r.useDelimiter&&(d=r.delimiterValue||"|",w=l.split(d),g=p.v.split(d),r.cookiesToLocalStorage&&w&&g&&w[1]&&w[1]!==g[1]?_(c,{v:l},r.expireOffsetMillis):r.localStorageToCookies&&w&&g&&w[0]!==g[0]&&(!w[1]||w[1]===g[1])&&v(c,p.v,p.e||Date.now()+r.expireOffsetMillis,r.notEncoded,!0,n))}catch(t){console.error("Unable to synchCookiesAndLocalStorage for synchCookie item: ".concat(JSON.stringify(r)),t)}}try{(0<Object.keys(a).length||0<Object.keys(t).length)&&T("info","User storage Synced",{process:"storage-sync","cookie-sync":JSON.stringify(t),"ls-sync":JSON.stringify(a)})}catch(t){}}}q.name="classic";try{window.__uspapi=function(t,e,n){return U["v".concat(e)]&&"function"==typeof U["v".concat(e)][t]?n?void U["v".concat(e)][t].apply(null,[n]):U["v".concat(e)][t]:!!n&&void n(null,!1)}}catch(t){}if("function"==typeof Promise)try{lt(),setTimeout(st,0)}catch(t){}else document.addEventListener("pb-core-loaded",function(){try{lt(),setTimeout(st,0)}catch(t){}})}();
